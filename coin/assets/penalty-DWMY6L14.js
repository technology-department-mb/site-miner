import{T as re,a as oe}from"./TheLine-CX4pF2ul.js";import{u as ne,a as ie}from"./index-CJdRlVgL.js";import{q as ue,b as a,d as R,s as _e,c as m,a as t,v as O,F as I,r as G,n as y,e as c,o as d,_ as C,u as ce,f as T,l as pe,x as me,g as de,h as P,m as ve,t as p}from"./index-CxCyBNX2.js";/* empty css                                                                 */const ge="/images/penalty/game/target.svg",fe="/images/penalty/game/ball.avif",be="/images/penalty/game/ball.webp",z=ue("global",()=>{const S=a(0),r=a(null),s=a([]),k=a(!1),u=a(!1),n=a("right"),v=a(0),b=a(0);return{position:n,isPositionLeft:k,goalkeeperVideo:r,ballVideos:s,attempts:S,isAnimationStarted:u,currentTarget:v,attemptsBar:b}}),he={class:"progress-bar"},ye={class:"progress-bar__line"},ke={class:"progress-bar__items"},we=R({__name:"AppGameProgressBar",setup(S){const r=z(),s=a(100);return _e(()=>r.attemptsBar,()=>{r.attemptsBar===6&&(r.attemptsBar=0),setTimeout(()=>{s.value=100-r.attemptsBar/5*100},1e3)}),(k,u)=>(d(),m("div",he,[t("div",ye,[t("div",{class:"progress-bar__fill",style:O({transform:`translateX(-${s.value}%)`})},null,4),t("div",ke,[(d(),m(I,null,G(5,(n,v)=>t("div",{class:y(["progress-bar__item",{"progress-bar__item--active":v+1===c(r).attemptsBar}]),key:v},null,2)),64))])])]))}}),xe=C(we,[["__scopeId","data-v-87bb2f8c"]]),Be=fe,Te={class:"game"},Se={class:"game__gates"},$e={class:"game__goalkeeper"},Ve=["src"],Me={class:"game__ball-aim"},Je={class:"game__ball"},Ee=["src"],Pe={class:"tumbler"},Ae={class:"tumbler__box"},Ie={key:0,class:"timer"},Ge={class:"timer__wrapp"},Re={class:"timer__curent"},Ce={class:"timer__item"},De={class:"timer__item"},Le={class:"timer__item"},Ne={class:"timer__text"},He={class:"timer__submol"},Fe={class:"timer__submol"},Ke={class:"timer__submol"},Oe={class:"tumbler__wrapper"},ze=["disabled"],Ue={class:"tumbler__attempt"},Xe={class:"tumbler__attempt-count"},je={class:"tumbler__attempt-try"},qe=R({__name:"AppGame",setup(S){const{t:r}=ce(),s=z(),k="/",u=a(0),n=a(!1),v=a(""),b=a([]),$=a(-1),D=["Jump_right","Jump_right_down","Jump_up"],V=a(0),M=a(!1),J=a([]),g=a(-1),E=a(0),U=["ball_top","ball_right_up","ball_right_up_mobile","ball_right_down","ball_right_down_mobile"],X=["ball_top","ball_right_up","ball_right_up_mobile","ball_right_down","ball_right_down_mobile","ball_left_up","ball_left_up_mobile","ball_left_down","ball_left_down_mobile"],A={left:[5,6,7,8],right:[1,2,3,4],up:[0]},j=()=>document.createElement("video").canPlayType('video/mp4; codecs="hvc1"')!=="",q=()=>j()?"mp4":"webm",L=a([]),N=a([]),H=async e=>{const i=await(await fetch(e)).blob();return{blob:i,url:URL.createObjectURL(i)}},Q=async()=>{n.value=!0;const e=q(),l=D.map(h=>`${k}videos/goalkeeper/${h}.${e}`),i=U.map(h=>`${k}videos/ball/${h}.${e}`),[_,B]=await Promise.all([Promise.all(l.map(H)),Promise.all(i.map(H))]);n.value=!1,L.value=_,N.value=B},F=()=>{g.value=Math.floor(Math.random()*X.length),E.value=g.value<5?g.value:g.value-4},W=e=>A.right.includes(e)?(M.value=!0,["Jump_right","Jump_right_down","Jump_up"]):A.left.includes(e)?(M.value=!1,["Jump_right","Jump_right_down","Jump_up"]):A.up.includes(e)?(M.value=Math.random()<.5,["Jump_right","Jump_right_down"]):[],K=()=>{const e=W(g.value);e.length>0&&($.value=Math.floor(Math.random()*e.length),v.value=e[$.value],V.value=D.indexOf(v.value))},Y=()=>{var i,_;if(n.value||s.attemptsBar>1)return;n.value=!0,u.value--;let e=0;F(),K(),(i=J.value[E.value])==null||i.play(),(_=b.value[V.value])==null||_.play(),e++,s.attemptsBar++;const l=setInterval(()=>{var B,h;if(e>=5){clearInterval(l),J.value.forEach(f=>{f.load(),f.currentTime=0,f.pause()}),b.value.forEach(f=>{f.load(),f.currentTime=0,f.pause()}),n.value=!1,s.attemptsBar++,u.value===0&&(n.value=!0,s.attemptsBar=0,te());return}F(),K(),(B=J.value[E.value])==null||B.play(),(h=b.value[V.value])==null||h.play(),e++,s.attemptsBar++},5e3)},Z=T(()=>{switch(g.value){case 0:return{top:"34px"};case 1:return{top:"34px",right:"6px"};case 2:return{bottom:"102px",right:"90px"};case 3:return{bottom:"24px",right:"6px"};case 4:return{bottom:"26px",right:"93px"};case 5:return{top:"34px",left:"6px"};case 6:return{bottom:"102px",right:"245px"};case 7:return{bottom:"24px",left:"6px"};case 8:return{bottom:"26px",right:"245px"};default:return{}}}),ee=(e,l=[])=>e>=5&&e<10?0:e>1&&e<5?1:e===1?2:0,w=ne({interval:1e3}),o=ie("1w_timer",null),te=()=>{const e=new Date,l=e.setHours(e.getHours()+3).toString();o.value=l},x=T(()=>o.value?o.value>w.value.getTime():!1),ae=T(()=>{if(!o.value||!x.value)return 0;const e=o.value-w.value.getTime();return Math.floor(e/(1e3*60*60)).toString().padStart(2,"0")}),se=T(()=>{if(!o.value||!x.value)return 0;const e=o.value-w.value.getTime();return Math.floor(e%(1e3*60*60)/(1e3*60)).toString().padStart(2,"0")}),le=T(()=>{if(!o.value||!x.value)return 0;const e=o.value-w.value.getTime();return Math.floor(e%(1e3*60)/1e3).toString().padStart(2,"0")});return pe(()=>{if(!o.value)return;o.value-w.value.getTime()<=0&&(o.value=null,n.value=!1,u.value=10)}),me(()=>{Q()}),de(()=>{x.value||(u.value=10)}),(e,l)=>(d(),m("div",Te,[P(xe),t("div",Se,[t("img",{class:y(["game__gates-target",{"game__gates-target--visible":$.value!==-1}]),src:ge,alt:"target",style:O(Z.value)},null,6),t("div",{class:y(["goalkeeper-img",{"goalkeeper-img--visible":c(s).attemptsBar===0}])},null,2),t("div",$e,[(d(!0),m(I,null,G(L.value,(i,_)=>(d(),m("video",{key:_,src:i.url,muted:"",playsinline:"",ref_for:!0,ref_key:"goalkeeperVideo",ref:b,class:y(["game__goalkeeper-video",[{"game__goalkeeper-video--active":V.value===_&&c(s).attemptsBar!==0},{"game__goalkeeper-video--mirrored":M.value}]]),onEnded:l[0]||(l[0]=B=>$.value=-1)},null,42,Ve))),128))])]),t("div",Me,[t("picture",null,[l[1]||(l[1]=t("source",{srcset:Be,type:"image/avif"},null,-1)),t("img",{class:y(["game__ball-aim-ball",{"game__ball-aim-ball--visible":c(s).attemptsBar===0}]),src:be,alt:"ball"},null,2)])]),t("div",Je,[(d(!0),m(I,null,G(N.value,(i,_)=>(d(),m("video",{key:_,src:i.url,muted:"",playsinline:"",ref_for:!0,ref_key:"videoBallRef",ref:J,class:y(["game__ball-video",[{"game__ball-video--active":E.value===_&&c(s).attemptsBar!==0},{"game__ball-video--mirrored":g.value>4}]])},null,10,Ee))),128))]),t("div",Pe,[t("div",Ae,[x.value?(d(),m("div",Ie,[t("div",Ge,[t("div",Re,[t("div",Ce,p(ae.value),1),l[2]||(l[2]=t("span",{class:"timer__colon"},":",-1)),t("div",De,p(se.value),1),l[3]||(l[3]=t("span",{class:"timer__colon"},":",-1)),t("div",Le,p(le.value),1)]),t("div",Ne,[t("span",He,p(c(r)("penalty.timer[0]")),1),t("span",Fe,p(c(r)("penalty.timer[1]")),1),t("span",Ke,p(c(r)("penalty.timer[2]")),1)])])])):ve("",!0),t("div",Oe,[t("button",{class:"tumbler__button",onClick:Y,disabled:n.value||!u.value},p(c(r)("penalty.signal")),9,ze),t("div",Ue,[t("span",Xe,p(u.value),1),t("span",je,p(c(r)(`penalty.attempt[${ee(u.value)}]`)),1)])])])])]))}}),Qe=C(qe,[["__scopeId","data-v-2ced457d"]]),We={class:"app-wrapper"},Ye={class:"main"},Ze=R({__name:"penalty",setup(S){return a(10),(r,s)=>(d(),m("div",We,[P(re),P(oe,{class:"app-wrapper__header",game:"penalty"}),s[0]||(s[0]=t("div",{class:"background"},null,-1)),s[1]||(s[1]=t("div",{class:"floor"},null,-1)),t("div",Ye,[P(Qe)])]))}}),lt=C(Ze,[["__scopeId","data-v-f44ace47"]]);export{lt as default};
