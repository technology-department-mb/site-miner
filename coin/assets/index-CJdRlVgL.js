import{y as j,z as $,s as D,g as B,A as q,B as K,C as Q,D as h,E as k,G as U,b as I,H as X,I as Y,f as M,e as Z}from"./index-CxCyBNX2.js";function C(e){return K()?(Q(e),!0):!1}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ee=Object.prototype.toString,te=e=>ee.call(e)==="[object Object]",ne=()=>{};function re(e,n){function t(...a){return new Promise((r,c)=>{Promise.resolve(e(()=>n.apply(this,a),{fn:n,thisArg:this,args:a})).then(r).catch(c)})}return t}const P=e=>e();function ie(e=P,n={}){const{initialState:t="active"}=n,a=ae(t==="active");function r(){a.value=!1}function c(){a.value=!0}const s=(...u)=>{a.value&&e(...u)};return{isActive:k(a),pause:r,resume:c,eventFilter:s}}function oe(e){return Y()}function W(e){return Array.isArray(e)?e:[e]}function ae(...e){if(e.length!==1)return U(...e);const n=e[0];return typeof n=="function"?k(X(()=>({get:n,set:ne}))):I(n)}function ue(e,n,t={}){const{eventFilter:a=P,...r}=t;return D(e,re(a,n),r)}function le(e,n,t={}){const{eventFilter:a,initialState:r="active",...c}=t,{eventFilter:s,pause:u,resume:l,isActive:i}=ie(a,{initialState:r});return{stop:ue(e,n,{...c,eventFilter:s}),pause:u,resume:l,isActive:i}}function se(e,n=!0,t){oe()?B(e,t):n?e():q(e)}function ce(e,n=1e3,t={}){const{immediate:a=!0,immediateCallback:r=!1}=t;let c=null;const s=j(!1);function u(){c&&(clearInterval(c),c=null)}function l(){s.value=!1,u()}function i(){const f=h(n);f<=0||(s.value=!0,r&&e(),u(),s.value&&(c=setInterval(e,f)))}if(a&&T&&i(),$(n)||typeof n=="function"){const f=D(n,()=>{s.value&&T&&i()});C(f)}return C(l),{isActive:s,pause:l,resume:i}}function fe(e,n,t){return D(e,n,{...t,immediate:!0})}const N=T?window:void 0;function de(e){var n;const t=h(e);return(n=t==null?void 0:t.$el)!=null?n:t}function L(...e){const n=[],t=()=>{n.forEach(u=>u()),n.length=0},a=(u,l,i,f)=>(u.addEventListener(l,i,f),()=>u.removeEventListener(l,i,f)),r=M(()=>{const u=W(h(e[0])).filter(l=>l!=null);return u.every(l=>typeof l!="string")?u:void 0}),c=fe(()=>{var u,l;return[(l=(u=r.value)==null?void 0:u.map(i=>de(i)))!=null?l:[N].filter(i=>i!=null),W(h(r.value?e[1]:e[0])),W(Z(r.value?e[2]:e[1])),h(r.value?e[3]:e[2])]},([u,l,i,f])=>{if(t(),!(u!=null&&u.length)||!(l!=null&&l.length)||!(i!=null&&i.length))return;const m=te(f)?{...f}:f;n.push(...u.flatMap(b=>l.flatMap(v=>i.map(w=>a(b,v,w,m)))))},{flush:"post"}),s=()=>{c(),t()};return C(t),s}function pe(e,n={}){const{immediate:t=!0,fpsLimit:a=void 0,window:r=N,once:c=!1}=n,s=j(!1),u=M(()=>a?1e3/h(a):null);let l=0,i=null;function f(v){if(!s.value||!r)return;l||(l=v);const w=v-l;if(u.value&&w<u.value){i=r.requestAnimationFrame(f);return}if(l=v,e({delta:w,timestamp:v}),c){s.value=!1,i=null;return}i=r.requestAnimationFrame(f)}function m(){!s.value&&r&&(s.value=!0,l=0,i=r.requestAnimationFrame(f))}function b(){s.value=!1,i!=null&&r&&(r.cancelAnimationFrame(i),i=null)}return t&&m(),C(b),{isActive:k(s),pause:b,resume:m}}const O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E="__vueuse_ssr_handlers__",me=ve();function ve(){return E in O||(O[E]=O[E]||{}),O[E]}function ye(e,n){return me[e]||n}function he(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const we={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},V="vueuse-storage";function Se(e,n,t,a={}){var r;const{flush:c="pre",deep:s=!0,listenToStorageChanges:u=!0,writeDefaults:l=!0,mergeDefaults:i=!1,shallow:f,window:m=N,eventFilter:b,onError:v=o=>{console.error(o)},initOnMounted:w}=a,g=(f?j:I)(n),y=M(()=>h(e));if(!t)try{t=ye("getDefaultStorage",()=>{var o;return(o=N)==null?void 0:o.localStorage})()}catch(o){v(o)}if(!t)return g;const S=h(n),R=he(S),A=(r=a.serializer)!=null?r:we[R],{pause:_,resume:z}=le(g,()=>x(g.value),{flush:c,deep:s,eventFilter:b});D(y,()=>F(),{flush:c}),m&&u&&se(()=>{t instanceof Storage?L(m,"storage",F,{passive:!0}):L(m,V,H),w&&F()}),w||F();function J(o,d){if(m){const p={key:y.value,oldValue:o,newValue:d,storageArea:t};m.dispatchEvent(t instanceof Storage?new StorageEvent("storage",p):new CustomEvent(V,{detail:p}))}}function x(o){try{const d=t.getItem(y.value);if(o==null)J(d,null),t.removeItem(y.value);else{const p=A.write(o);d!==p&&(t.setItem(y.value,p),J(d,p))}}catch(d){v(d)}}function G(o){const d=o?o.newValue:t.getItem(y.value);if(d==null)return l&&S!=null&&t.setItem(y.value,A.write(S)),S;if(!o&&i){const p=A.read(d);return typeof i=="function"?i(p,S):R==="object"&&!Array.isArray(p)?{...S,...p}:p}else return typeof d!="string"?d:A.read(d)}function F(o){if(!(o&&o.storageArea!==t)){if(o&&o.key==null){g.value=S;return}if(!(o&&o.key!==y.value)){_();try{(o==null?void 0:o.newValue)!==A.write(g.value)&&(g.value=G(o))}catch(d){v(d)}finally{o?q(z):z()}}}}function H(o){F(o.detail)}return g}function be(e={}){const{controls:n=!1,interval:t="requestAnimationFrame"}=e,a=I(new Date),r=()=>a.value=new Date,c=t==="requestAnimationFrame"?pe(r,{immediate:!0}):ce(r,t,{immediate:!0});return n?{now:a,...c}:a}export{Se as a,be as u};
