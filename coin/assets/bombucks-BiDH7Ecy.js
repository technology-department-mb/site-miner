import{T as Z,a as O,A as j}from"./TheLine-CX4pF2ul.js";import{_ as y,c as h,o as u,a as n,q as J,b as v,f as k,d as D,v as I,n as T,e as t,F as M,r as z,t as m,u as V,g as K,x as Q,h as $,w as U,i as X}from"./index-CxCyBNX2.js";const Y={},ee={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"};function te(f,l){return u(),h("svg",ee,l[0]||(l[0]=[n("path",{d:"M1.14904 7.24075C0.193909 6.6893 0.19391 5.3107 1.14904 4.75925L8.85096 0.312544C9.80609 -0.2389 11 0.450405 11 1.55329V10.4467C11 11.5496 9.80609 12.2389 8.85096 11.6875L1.14904 7.24075Z",fill:"#D9D9D9"},null,-1)]))}const le=y(Y,[["render",te]]),ne={},se={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"};function oe(f,l){return u(),h("svg",se,l[0]||(l[0]=[n("path",{d:"M9.85096 7.24075C10.8061 6.6893 10.8061 5.3107 9.85096 4.75925L2.14904 0.312544C1.19391 -0.2389 0 0.450405 0 1.55329V10.4467C0 11.5496 1.19391 12.2389 2.14904 11.6875L9.85096 7.24075Z",fill:"#D9D9D9"},null,-1)]))}const ie=y(ne,[["render",oe]]),B=J("global",()=>{const f=[{name:"3x6",cols:3,rows:6,cellWidth:65,cellHeight:70,gap:0,cellWidth768:79,cellHeight768:73,gap768:5},{name:"4x9",cols:4,rows:9,cellWidth:57,cellHeight:56,gap:4,cellWidth768:57,cellHeight768:66,gap768:5},{name:"5x12",cols:5,rows:12,cellWidth:48,cellHeight:43,gap:6,cellWidth768:48,cellHeight768:43,gap768:4}],l=v(10),s=v(!1),r=v(3*60*60),a=v(0),e=k(()=>f[a.value]),o=v([]),i=v(!1);let p=null;const x=()=>{o.value=Array.from({length:e.value.rows},()=>Array.from({length:e.value.cols},()=>({color:"white"})))};x();const A=k(()=>{const c=window.innerWidth>=768?e.value.cellWidth768:e.value.cellWidth,d=window.innerWidth>=768?e.value.cellHeight768:e.value.cellHeight,S=window.innerWidth>=768?e.value.gap768:e.value.gap;return{width:`${e.value.cols*c+(e.value.cols-1)*S+50}px`,height:`${e.value.rows*d+(e.value.rows-1)*S}px`,gap:`${S}px`}}),C=k(()=>{const c=window.innerWidth>=768?e.value.cellWidth768:e.value.cellWidth,d=window.innerWidth>=768?e.value.gap768:e.value.gap;return{width:`${e.value.cols*c+(e.value.cols-1)*d}px`}}),E=k(()=>({gap:`${window.innerWidth>=768?e.value.gap768:e.value.gap}px`})),q=c=>`cell-${c.color}`,N=()=>({width:`${window.innerWidth>=768?e.value.cellWidth768:e.value.cellWidth}px`,height:`${window.innerWidth>=768?e.value.cellHeight768:e.value.cellHeight}px`});console.log(window,innerWidth);const G=k(()=>{const c=window.innerWidth>=768?e.value.cellWidth768:e.value.cellWidth,d=window.innerWidth>=768?e.value.cellHeight768:e.value.cellHeight;return{width:`${c}px`,height:`${d}px`}}),P=(c,d,S)=>{const F=c.scrollTop,b=d-F,w=performance.now(),H=_=>{const W=_-w,g=Math.min(W/S,1);c.scrollTop=F+b*g,g<1&&requestAnimationFrame(H)};requestAnimationFrame(H)},L=async()=>{i.value=!0,l.value--;const c=o.value.length,d=document.querySelector(".game-field"),S=d.children[0].clientHeight,F=Math.floor(d.clientHeight/S);let b=0;for(let w=0;w<c;w++){o.value[w].forEach(_=>_.color="gray"),await new Promise(_=>{p=setTimeout(_,1e3)});const H=Math.floor(Math.random()*e.value.cols);if(o.value[w].forEach((_,W)=>{_.color=W===H?"green":"white"}),await new Promise(_=>{p=setTimeout(_,500)}),b++,b>=F-2){const _=d.scrollHeight-d.clientHeight;for(P(d,_,4500);b<c;){o.value[b].forEach(g=>g.color="gray"),await new Promise(g=>{p=setTimeout(g,1e3)});const W=Math.floor(Math.random()*e.value.cols);o.value[b].forEach((g,R)=>{g.color=R===W?"green":"white"}),await new Promise(g=>{p=setTimeout(g,500)}),b++}break}}if(i.value=!1,l.value===0){const w=new Date;localStorage.setItem("1w_timer",w.setHours(w.getHours()+3).toString()),s.value=!0}};return{prevFieldSize:()=>{a.value>0&&!i.value&&(a.value--,x())},nextFieldSize:()=>{a.value<f.length-1&&!i.value&&(a.value++,x())},currentFieldIndex:a,fieldSizes:f,currentField:e,grid:o,fieldStyle:A,cellStyle:G,rowStyle:E,handleAnimationClick:()=>{const c=document.querySelector(".game-field");i.value?(p&&clearTimeout(p),i.value=!1,x()):(c.scrollTo({top:0,behavior:"smooth"}),x(),L())},getCellClass:q,getCellStyle:N,startAnimation:L,columnNumbersStyle:C,attemptCount:l,isAnimating:i,timerVisible:s,timer:r}}),ae={class:"game-container"},re={class:"rotated-text"},ce=D({__name:"AppGame",setup(f){const l=B();return(s,r)=>(u(),h("div",ae,[n("div",{class:T(["column-numbers",[{"numbers-5x12":t(l).currentFieldIndex===2},{"numbers-4x9":t(l).currentFieldIndex===1},{"numbers-3x6":t(l).currentFieldIndex===0}]]),style:I(t(l).columnNumbersStyle)},[(u(!0),h(M,null,z(t(l).currentField.cols,a=>(u(),h("span",{key:a,class:T(["column-number",[{"column-5x12":t(l).currentFieldIndex===2},{"column-4x9":t(l).currentFieldIndex===1},{"column-3x6":t(l).currentFieldIndex===0}]])},[n("span",re,m(a),1)],2))),128))],6),r[0]||(r[0]=n("div",{class:"column-shadow"},null,-1)),n("div",{class:"game-field",style:I(t(l).fieldStyle)},[(u(!0),h(M,null,z(t(l).grid,(a,e)=>(u(),h("div",{key:e,class:"row",style:I(t(l).rowStyle)},[n("span",{class:T(["row-numbers",[{"row-5x12":t(l).currentFieldIndex===2},{"row-4x9":t(l).currentFieldIndex===1},{"row-3x6":t(l).currentFieldIndex===0}]])},m(e+1),3),(u(!0),h(M,null,z(a,(o,i)=>(u(),h("div",{key:i,class:T(["cell",[t(l).getCellClass(o),`cell-size-${t(l).currentField.name}`]]),style:I(t(l).getCellStyle())},null,6))),128))],4))),128))],4),r[1]||(r[1]=n("div",{class:"game-shadow"},null,-1))]))}}),de=y(ce,[["__scopeId","data-v-e945c51a"]]),ue={class:"timer"},me={class:"timer__col"},he={class:"timer__num"},pe={class:"timer__text"},_e={class:"timer__col"},ge={class:"timer__num"},ve={class:"timer__text"},we={class:"timer__col"},fe={class:"timer__num"},xe={class:"timer__text"},be=D({__name:"AppTimer",emits:["clearTimer"],setup(f,{emit:l}){const s=l,{t:r}=V(),a=v("00"),e=v("00"),o=v("00"),i=localStorage.getItem("1w_timer");return(()=>{const x=setInterval(()=>{const C=i-new Date;if(C<=0){clearInterval(x),localStorage.removeItem("1w_timer"),s("clearTimer");return}a.value=String(Math.floor(C/36e5)).padStart(2,"0"),e.value=String(Math.floor(C%36e5/6e4)).padStart(2,"0"),o.value=String(Math.floor(C%6e4/1e3)).padStart(2,"0")},1e3)})(),(x,A)=>(u(),h("div",ue,[n("p",me,[n("span",he,m(a.value),1),n("span",pe,m(t(r)("bombucks.timer[0]")),1)]),n("p",_e,[n("span",ge,m(e.value),1),n("span",ve,m(t(r)("bombucks.timer[1]")),1)]),n("p",we,[n("span",fe,m(o.value),1),n("span",xe,m(t(r)("bombucks.timer[2]")),1)])]))}}),Se=y(be,[["__scopeId","data-v-7ca0b1b3"]]),Ce={class:"main"},$e={class:"controller"},We={key:1,class:"controller-size"},ke={class:"game-size"},ye=["disabled"],Fe={class:"controller-attempts"},He=["disabled"],Ie={class:"attempts"},Te=D({__name:"bombucks",setup(f){const{t:l}=V(),s=B(),r=v(null),a=(o,i=[])=>o>=5&&o<10?0:o>1&&o<5?1:o===1?2:0,e=()=>{setTimeout(()=>{s.timerVisible=!1,s.attemptCount=10},1e3)};return K(()=>{localStorage.getItem("1w_timer")&&(s.timerVisible=!0,s.attemptCount=0)}),Q(()=>(r.value&&r.value.innerHTML,{appWrapper:r})),(o,i)=>(u(),h("div",{class:"app-wrapper",ref_key:"appWrapper",ref:r},[$(Z),$(O,{class:"app-wrapper__header",game:"bombucks"}),n("main",Ce,[$(de),n("div",$e,[$(j,{class:"controller_wrapper"},{default:U(()=>[t(s).attemptCount===0&&t(s).timerVisible?(u(),X(Se,{key:0,onClearTimer:e,class:"controller-timer"})):(u(),h("div",We,[n("button",{class:"click-left",onClick:i[0]||(i[0]=p=>t(s).prevFieldSize())},[$(le,{class:"icon"})]),n("div",ke,[n("span",null,m(t(s).currentField.name),1),n("span",null,m(t(l)("bombucks.field")),1)]),n("button",{class:"click-right",onClick:i[1]||(i[1]=p=>t(s).nextFieldSize()),disabled:t(s).currentFieldIndex===2},[$(ie,{class:"icon"})],8,ye)])),n("div",Fe,[n("button",{class:"signal-button",onClick:i[2]||(i[2]=(...p)=>t(s).handleAnimationClick&&t(s).handleAnimationClick(...p)),disabled:t(s).isAnimating||t(s).attemptCount===0},m(t(l)("bombucks.signal")),9,He),n("div",Ie,[n("span",null,m(t(s).attemptCount),1),n("span",null,m(t(l)(`bombucks.attempt[${a(t(s).attemptCount)}]`)),1)])])]),_:1})])])],512))}}),Ve=y(Te,[["__scopeId","data-v-422b2929"]]);export{Ve as default};
